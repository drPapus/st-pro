import{GLTFLoader as e}from"https://unpkg.com/three@0.127.0/examples/jsm/loaders/GLTFLoader.js";import{AnimationMixer as t,TubeGeometry as n,MeshBasicMaterial as o,TextureLoader as i,BackSide as s,MirroredRepeatWrapping as a,Mesh as c,PerspectiveCamera as r,HemisphereLight as d,DirectionalLight as l,Scene as p,Color as u,AxesHelper as m,GridHelper as h,WebGLRenderer as w,Clock as g}from"https://unpkg.com/three@0.127.0/build/three.module.js";import{GrannyKnot as f}from"https://cdn.jsdelivr.net/npm/three-full@28.0.2/sources/curves/CurveExtras.js";import{OrbitControls as y}from"https://unpkg.com/three@0.127.0/examples/jsm/controls/OrbitControls.js";async function j(){const n=new e,[o]=await Promise.all([n.loadAsync("https://s3-us-west-2.amazonaws.com/s.cdpn.io/1376484/stacy_lightweight.glb",(function(e){}),void 0,(function(e){console.error(e)}))]);console.log("Human!",o);const i=function(e){const n=e.scene.children[0],o=e.animations[0],i=new t(n);return i.clipAction(o).play(),n.tick=e=>i.update(e),n}(o);return i.scale.set(.02,.02,.02),i.position.set(0,-2,-6),i.rotation.set(2,0,4),{human:i}}function b(){const e=new f([]),t=new n(e,150,3,32,!0),r=new o({map:(new i).load("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/f49e62e3-9d09-4452-a762-f750621d25bd/d77gh18-80e0517b-252c-40f5-95cc-c0d2f0a3bf58.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2Y0OWU2MmUzLTlkMDktNDQ1Mi1hNzYyLWY3NTA2MjFkMjViZFwvZDc3Z2gxOC04MGUwNTE3Yi0yNTJjLTQwZjUtOTVjYy1jMGQyZjBhM2JmNTguanBnIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.RMaz2qU-sIFa9O1CcV0i5augrp-v6-DwmVD1pPtbfdI"),side:s});r.map.wrapS=a,r.map.wrapT=a,r.map.repeat.set(30,4);const d=new c(t,r);return d.position.set(0,0,0),console.log("Tube!"),d.tick=()=>{},d}const I=(e,t,n)=>{t.aspect=e.clientWidth/e.clientHeight,t.updateProjectionMatrix(),n.setSize(e.clientWidth,e.clientHeight),n.setPixelRatio(window.devicePixelRatio)};class L{constructor(e,t,n){I(e,t,n),window.addEventListener("resize",(()=>{I(e,t,n),this.onResize()}))}onResize(){}}const k=new g;class M{constructor(e,t,n){this.camera=e,this.scene=t,this.renderer=n,this.updatables=[]}start(){this.renderer.setAnimationLoop((()=>{this.tick(),this.renderer.render(this.scene,this.camera)}))}stop(){this.renderer.setAnimationLoop(null)}tick(){const e=k.getDelta();for(const t of this.updatables)t.tick(e)}}let v,z,T,N;class O{constructor(e){v=function(){const e=b(),t=new r(45,2,.1,1e3);t.position.set(0,0,100);let n=0;return t.tick=()=>{n+=3e-4;let o=e.geometry.parameters.path.getPointAt(n%1),i=e.geometry.parameters.path.getPointAt((n+.01)%1);t.position.set(o.x,o.y,o.z),t.lookAt(i)},t}(),z=function(){const e=new w({antialias:!0});return e.setAnimationLoop((()=>{})),e.physicallyCorrectLights=!0,e}(),T=function(){const e=new p;return e.background=new u("lightblue"),e}(),N=new M(v,T,z),e.append(z.domElement),function(e,t){const n=new y(e,t);n.tick=()=>n.update()}(v,z.domElement);const{ambientLight:t,mainLight:n}=function(){const e=new d("white","darkslategrey",5),t=new l("white",5);return t.position.set(10,10,10),{ambientLight:e,mainLight:t}}(),o=b();T.add(t,n,o),N.updatables.push(v),new L(e,v,z),T.add(function(){const e=new m(30);return e.position.set(-3.5,0,-3.5),e}(),new h(60))}async init(){const{human:e}=await j();N.updatables.push(e),T.add(v),v.add(e)}render(){z.render(T,v)}start(){N.start()}stop(){N.stop()}}(async function(){const e=document.querySelector("#scene-container");!function(){let e=0;window.addEventListener("load",(function(){let e=document.getElementById("preloader");e.classList.add("hide-preloader"),setInterval((function(){e.classList.add("preloader-hidden")}),3e3)})),window.addEventListener("load",(function(){if(0==e){let i=function(){n>=100?(clearInterval(o),e=0):(n++,t.style.width=n+"%")};e=1;var t=document.getElementById("preloader__progress"),n=1,o=setInterval(i,30)}})),preloader}(),document.getElementById("out_in_space").addEventListener("change",(function(){console.log(this.value),100==this.value?(console.log("You out of space!!!"),document.getElementById("inspace").style.display="none"):console.log("Push harder!")}));const t=new O(e);await t.init(),t.render(),t.start()})().catch((e=>{console.error(e)}));
